var Barometer=function(opts){opts=opts||{},this._i2c=opts.i2c||I2C1,this._address=opts.address||92};Barometer.prototype.writeI2C=function(reg,data){this._i2c.writeTo(this._address,[reg,data])},Barometer.prototype.readI2C=function(reg,count){return void 0===count&&(count=1),this._i2c.writeTo(this._address,128|reg),this._i2c.readFrom(this._address,count)},Barometer.prototype.init=function(){if(189!==this.whoAmI())this.writeI2C(32,224);else{this.writeI2C(32,192);for(var t=getTime()+.1;getTime()<t;);}},Barometer.prototype.pressure=function(){var data=this.readI2C(40,3),baro;return(baro=data[1]<<8|data[2]<<16||data[0])>2147483647&&(baro-=4294967295),baro/=40960},Barometer.prototype.whoAmI=function(){return this.readI2C(15)[0]},Barometer.prototype.temp=function(){var data=this.readI2C(43,2),temp=data[0]|data[1]<<8;return temp>=32767&&(temp-=65535),temp=42.5+temp/480},exports.connect=function(opts){return new Barometer(opts)};