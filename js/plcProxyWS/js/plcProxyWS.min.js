class ProxyWS{constructor(_wss){this._WSS=_wss,this._SubID={},this._Subs={sensor:{}},this._SubDM=!1,Object.on("proxyws-sub-sensorall",_msg=>{this._SubDM=!0}),Object.on("proxyws-send",_msg=>{this.Send(JSON.stringify(_msg))}),Object.on("all-data-raw-get",_msg=>{this._SubDM&&this.Send(JSON.stringify(_msg))})}Receive(_msg,_key){let msg=null;try{msg=JSON.parse(_msg)}catch(e){throw new err("Incorrect JSON data")}msg.metadata={source:"proxyws"},Object.emit(msg.com,msg)}Send(data){this._WSS.Notify(data)}RemoveSub(key){for(let k of this._SubID)this._SubID[k]===key&&delete this._SubID[k];0===Object.keys(this._SubID).length&&Object.emit("repl-cm","EWI")}}exports=ProxyWS;